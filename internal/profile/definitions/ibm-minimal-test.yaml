name: ibm-minimal-test
displayName: IBM Cloud Minimal Test Cluster
description: Compact 3-node cluster for IBM Cloud testing (masters schedulable, no workers)
platform: ibmcloud
enabled: false  # Will be enabled in Phase 2

openshiftVersions:
  allowlist:
    - "4.20.3"
    - "4.20.4"
    - "4.20.5"
  default: "4.20.3"

regions:
  allowlist:
    - us-south
    - us-east
    - eu-de
  default: us-south

baseDomains:
  allowlist:
    - labs.example.com
    - ibm.example.com
  default: labs.example.com

compute:
  controlPlane:
    replicas: 3
    instanceType: bx2-4x16
    schedulable: true
  workers:
    replicas: 0
    minReplicas: 0
    maxReplicas: 3
    instanceType: bx2-8x32
    autoscaling: false

lifecycle:
  maxTTLHours: 72
  defaultTTLHours: 24
  allowCustomTTL: true
  warnBeforeDestroyHours: 1

networking:
  networkType: OVNKubernetes
  clusterNetworks:
    - cidr: 10.128.0.0/14
      hostPrefix: 23
  serviceNetwork:
    - 172.30.0.0/16
  machineNetwork:
    - cidr: 10.0.0.0/16

tags:
  required:
    Environment: test
  defaults:
    Purpose: testing
    ManagedBy: cluster-control-plane
  allowUserTags: true

features:
  offHoursScaling: true
  fipsMode: false
  privateCluster: false

costControls:
  estimatedHourlyCost: 2.80
  maxMonthlyCost: 2000
  budgetAlertThreshold: 0.8

platformConfig:
  ibmcloud:
    resourceGroup: default
    vpcName: ocpctl-vpc
